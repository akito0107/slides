<!-- sectionTitle: TypeScriptでAPIを提供する -->

import { Img } from "@fusuma/client";

## TypeScriptでLibraryと型を提供する

---

## TypeScriptでLibraryを書くメリットはなにか

- Libraryを書く人
    - 型に守られるため堅牢性/メンテナンス性/etcが上がる
- Libraryを使う人
    - (型が正しく提供されていれば)<strong>APIの仕様把握のコストが減る</strong>

--- 

import {Card, Code} from "@fusuma/client";

## example

- 足し算ライブラリ

<Card
    left={
        <>
            <h3>js</h3>
            <br />
            <Code language="js">
{`function sum(a, b) {
    return a + b;
}`}
            </Code>
        </>
        }
    right={
        <>
            <h3>ts</h3>
            <br />
            <Code language="ts">
{`function sum(a: number, b: number) {
    return a + b;
}`}
            </Code>
        </>
        }
/>

---

## example

- API仕様をcompilerが示してくれる

<Card
    left={
        <>
            <h3>js</h3>
            <br />
            <Code language="js">{
`// 123str
sum(123, "str");
// returnされた値はどうなっているのか？
const a = sum(123, 456);
            `}</Code>
        </>
        }
    right={
        <>
            <h3>ts</h3>
            <br />
            <Code language="ts">
{`// compile error
sum(123, "str");
// aもnumberとして推論されている
const a = sum(123, 456);
`}
            </Code>
        </>
        }
/>

--- 

## 良いAPIについて

- プログラマがその API についてよく知らなくても<strong>(無知)</strong>目的を達成できること
- <strong>今回はこの定義の観点から考えてみる</strong>

```
ソフトウェアエンジニアリングの無知の核心は、プログラマが多くを知ることなく、それでも優れた結果を達成させることです。
~(中略)~目標は、開発者がすべてを知らなくてもよいコーディング方法を見つけることです。
すなわち、開発者が必要な知識を選択することです。私は、それを選択的無知（selective cluelessness）と呼びます。

Jaroslav Tulach. API デザインの極意 Java/NetBeans アーキテクト探究ノート (Kindle Locations 869-873).
```

<Img src="../images/api_design.png" />

---

## (このコンテキストにおける)型の役割

- TypeScriptで提供されたAPIは知識を型が表してくれる。（引数・返り値など）
- (ただし、TypeScript自体の知識は必要)
- (要するに型ってdocumentationの役割果たしてくれるよね、ということの言い換え)
- <strong>どれだけAPIの知識を型を使って表現できるかの勝負</strong>

--- 

## もうちょっと具体的な話
